# ---- 암호화 이해 ----
- 문서 내용 암호화하여 전달 ---> 문서내용 보호
- 문서 암호화, 복호화 ---> 비밀키 사용
- 컴퓨터 네트워크에서는 중간 전송매체를 통해 메시지 송수신
- 외부 침입자의 전송 메시지에 가하는 위험
    - 메시지 읽기
        - 전송 선로 신호 도청
        - 암호화 기법으로 해결
    - 전송 방해
        - 메시지가 수신자에게 도착하지 못하도록 방해
        - 방화벽에 불법사이트 차단기능이 해당
        - Dos공격
    - 메시지 수정
        - 전송 메시지를 수정하여 메시지 의미 왜곡
- 용어
    - 암호화
        - 원래 의미 알 수 없도록 메시지 내용 변형
    - 해독
        - 암호화된 문서를 원문서로 복원
    - 원문서
        - 암호화 되기 전 원본문서
    - 암호문
        - 암호화된 문서
    - 암호키
        - 암호문을 작성하는 과정에서 사용하는 임의패턴
- 암호화 알고리즘
    - 용어
        - 암호키(kE) 
            - 암호화 과정에서 사용하는 키
        - 해독키(kD)
            - 해독과정에서 사용하는 키
        - 대칭키 방식
            - 암호키 = 해독키
            - 하나의 키로 암호화, 해독
        - 비대칭키 방식
            - 암호키 ≠ 해독키
            - 암호화 키, 해독 키 2개
    - 대체 암호화
        - 특정 문자를 다른 문자로 1:1대응
        - 시저 암호화
            - 알파벳 문자를 순차적으로 3문자씩 오른쪽으로 이동
            - A --> d/ B --> e
        - 키워드 암호화
            - 키워드로 지정된 단어의 문자를 먼저 적고, 나머지 문자를 알파벳 순으로 기술
            - ABCDE ---> SEOUL/ 나머지 ---> abcdefg...
            - 시저 암호화에 비해 대체 문자표 추출 어려움
            - 오른쪽으로 갈수록 원문과 암호문이 같을 확률 높아짐
        - 복수개 문자표
            - 2이상 문자표 사용
            - ex) 홀수위치, 짝수위치 문자표 다르게 사용
                - 홀수위치 
                    - 시저암호화
                - 짝수위치
                    - 키워드암호화
    - 위치암호화
        - 문자 배열 순서를 변경하여 암호화하여 위치암호화
        - 각 문자 모양은 그대로 유지, 문자 배열위치를 임의변경
        - 컬럼 암호화
            - 전체 문장을 컬럼(열) 기준으로 다시 배치
            - ex) 7인 경우 7개씩 잘라서 세로로 보이는 문자 배열이 암호
            - 컬럼 암호화를 두번 수행하는 이중 컬럼 암호화
        - 키워드 암호화
            - 임의단어를 이용하여 컬럼 순서 결정
            - ex) network ---> 알파벳순으로 순서 매김 ---> 여기에 문자배열 대응 시킴 ---> 순서대로 나열해서 암호문
---
---
# ---- 암호화시스템 ----
### 대칭키 암호방식
- 암호화 = 복호화 ---> 키 1개
- 공통키/대칭키 암호방식
- 키 = 비밀키
- 암호화 복호화를 수행하는 두 사용자가 동일한 키 소유
    - pre-shared key
    - 온라인 상에서 구두, 메일, 전화로 교화 --> 수동키
- 블록 암호
    - 특정 블록 크기로 암호화, 복호화 수행
    - 장점
        - 스트림에 비해 속도 빠름
    - 단점
        - 블록 간 연과성 ---> 오류 生 전체데이터 영향
- 스트림 암호
    - 비밀키 상호공유, 사용한 비밀키는 재사용X
    - 장점
        - 비트열에 오류 生 ---> 오류 확산X
    - 단점
        - 1비트씩 연산 --> 속도 느림
        - 비밀키를 안전하게 전송해야함
- 대표 알고리즘
    - DES
        - 동작방식
            - 암호키 = 56비트
            - 64비트 단위로 암호화
            - 16단계 암호화과정 + 2단계 위치암호화
        - 안전성
            - 2^56개 키 존재
    - 3DES
        - 키길이, 라운드 수 DES의 3배 
    - SEED
        - 국내 대표적인 암호화 알고리즘
        - 국내에서 개발
        - DES와 같은 Feistel 구조
        - 128비트 키, 128비트 블럭크기
        - 128비트 고정길이 입출력
        - known attack에 강한 라운드 기능
        - 4개의 8*8 S-box
        - XOR + modular 혼합연산
        - 16라운드 수행
    - RC2, RC5
    - AES
        - 가변 블록길이(128, 192, 256) 지원
        - 키 = 128, 192, 256비트 사용
        - 키 길이에 의해 라운드 결정
        - 레이어로 구성
            - 선형혼합 = 라운드
            - 비선영 = S-box
            - 키추가 = 라운드키의 XOR
---
### 비대칭키 암호(공개키 암호)
- 비밀키 보관에 따라 안전도 좌우
- 통신 상대 확인에 디지털서명 사용 가능
- 키관리 뛰어남
- 상태적으로 암호화 속도 느림 ---> 직접 데이터 암호화에는 사용X
- RSA 알고리즘
    - 비대칭키의 공개키 알고리즘
        - 공개키
            - 원문서 암호화하는 용도
            - 모든 사람이 암호화 과정 수행
        - 비공개키(비밀키)
            - 암호문 해독 용도
            - 특정인만 해독과정 수행
    - 암호화 과정
        - 소인수분해의 복잡성 이용
        - 가입자는 2개 소수 p,q 선택 ---> n=pq 계산
        - p,q를 알고 있는 사용자는 n을 계산하기 쉽지만, n만 가지고는 p,q를 유추하기 어려움
    - 안전성
        - 소수 p, n에 달려있음
        - 공개키와 n으로 비밀키 d를 찾을 수 있으면 쉽게 해독
        - n으로부터 p,q를 찾을 수 있으면 n의 소인수 분해 가능
        - 오일러 함수로 찾게 되어 공개키로부터 비밀키를 찾을 수 있음
        - 부가 조건
            - p,q는 거의 같은 크기의 소수
            - p-1, q-1은 큰 소수를 인수로 가져야 함
            - p-1, q-1의 최대공약수는 작아야함
        - 현재까지 p,q의 크기가 100자리, n이 200자리인 합성수의 경우 n의 소인수분해가 거의 불가능한 것으로 알려짐
        - 공개키와 비밀키의 크기가 너무 작으면 X, 지나치게 크면 연산양多 ---> 속도저하
        - 상용장비 ---> n=512비트(155자리수)
        - 연산부하 증가 --> 상용화 어려움
- EIGamal
    - 이산대수 문제 근간
- ECC
    - 타원곡선 이산대수 응용
    - 연산속도 빠름
    - 키 적음
    - 저작권이 개인 회사에게 있어 사용료 지급
---
### 전자서명
- 조건
    - 위조불가
        - 서명자만이 서명 생성가능
    - 서명자 인증
        - 서명사만이 신분확인가능
    - 재사용불가
        - 다른 문서의 서명으로 사용X
    - 변경불가
        - 서명된 문서내용 변경X
    - 부인불가
        - 서명사실 부인X
- 알고리즘
    - 공개키 암호방식 이용
    - 서명자가 비밀키로 서명생성
    - 검증자가 공개키로 확인
    - 직접서명방식
        - 송수신자간에 직접 서명, 검증
    - 중계서명방식
        - 중재자를 통해 확인
        - 통신 전 정보 공유 필요X, 
        - 외부로부터 공격에 강함
        - 시간확인 가능
- 해쉬함수 + 비대칭키 알고리즘
    - 해쉬함수
        - MDS
            - message digest version 5
            - 512비트 입력 128출력
            - 충돌 회피성에 대한 문제 ---> 기존응용과 호환으로만 사용
            - 일반적으로 사용多
            - 대안알고리즘
                - RIPE-MD-128
                    - 충돌저항성 문제有
                - RIPE-MD-160
                    - 낮은 효율성
                    - 높은 안전성
                    - 널리 사용중 
                - RIPE-MD-256
                - RIPE-MD-320
        - MD4
            - 메시지를 128비트로 압축
            - MD5보다 약간 빠름
            - MD5보다 안전성 측면에서 떨어짐
        - SHA
            - secure hash algorithm
            - MD4와 유사설계
            - 512비트 단위로 메시지 입력
            - 160비트 해쉬값 출력
            - 입력전 메시지 길이 512비트 정수배로 조정
            - SHA-1 = 디지털서명에 사용
            - AES 128, 192, 256비트에 적용하도록 SHA256, 382 512로 확장
---
---
# ---- 보안 프로토콜 ----
### 전형적인 공격유형
- 방해
    - DoS
    - 대응책
        - 장애 감지 시 연결 단절 ---> 다른 통신수단으로 대체
        - 침입차단시스템으로 1차방어
        - 2차적으로 고가용성 기능 이용 ---> 서비스 지속, 연결유지
- 가로채기
    - 통신 일부를 엿들음
    - Sniffing
    - 대응방안
        - 기밀성을 패킷에 부여(암호화)
- 변조
    - 암호, 서명 통한 기밀성과 무결성
- 위조
    - 대응방안
        - 암호, 서명 통한 기밀성과 무결성
---
### 암호화
- 데이터 링크 계층 암호화
    - 전송선로상 감청으로부터 보호
    - 단점
        - 라우터 등 호스트 내부에서는 보호X
- 응용계층 암호화
    - 호스트 내부 보안지원
### VPN(virtual private network, 가상사설망)
- 암호화 원리 적용
- 공중망을 사설망처럼 이용할 수 있도록 사이트 양단간 암호화통신 지원 장치
- 원격사용자가 공중망, 인터넷을 통해 내부망 시스템 사용 시 공중망 구간에서의 도청으로 인한 정보유출을 방지하기 위해 사용자와 내부망간 암호화통신 지원
- 장점
    - 저비용 ---> 광범위한 사설 네트워크 구성
    - 기업 네트워크 관리, 운영비용 절감
    - 재택근무자 등 개별 사용자 지원
    - 무선 이동환경 사용자 지원
    - 기업 네트워크 유동성 지원
- 단점
    - 인터넷 상황에 따라 네트워크 성능이 종속적
    - 전용선보다 낮은 신뢰성, 보안성
    - 서비스에 문제 生 ---> 책임소재 불분명
- 기능
    - 암호화
    - 사용자인증
    - 무결성
    - 터널링
- 관련 프로토콜
    - L2TP(layer 2 tunneling protocol)
    - IPSec(IP security protocol)
---
### 트레픽 제어
- 특정 호스트 트래픽 량 자체가 중요한 정보
- 무의미한 가공 데이터를 추가적으로 발생 ---> 통계자료에 혼란 생성
    - 자료 통신량, 송신자, 수신자 랜덤하게 생성
### 방화벽
- 개방적인 공중인터넷망, 제한된 그룹 사설망 사이에서 보안기능
- 패킷 필터링
    - 패킷 헤더, 내용 검색 ---> 차단 여부 결정
    - 일반적으로 라우터에서 제공
- 트래픽 관찰 ---> 의심스로운 사용자 감시
- 라우터를 이용한 방화벽 구현
    - 네트워크계층, 전송계층의 헤더에 기초하여 방화벽 수행
    - 외부망과 중개기능 수행 
    - 간단, 효과적
    - IP주소 기반
        - 위장 IP주소 차단
        - 스팸메일 발송하는 외부호스트 차단
        - 내부 사용자가 유해사이트로 접속하는 것 차단
    - 포트 번호 기반
        - 특정서비스 이용 차단
        - WEB, FTP 등 서비스별로 허용, 차단 설정
- 프록시 이용한 방화벽 구현
    - 응용환경에서 적절하게 처리할 수 있는 정보만 수신하도록 가상의 응용프로그램을 시뮬레이션하는 방화벽
    - 내부에서는 외부 연결, 외부 네트워크에서는 내부 응용연결로 보임